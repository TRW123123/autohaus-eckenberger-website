---
import { formatPrice, formatMileage, type Car } from "../lib/inventory";

interface Props {
    car: Car;
}

const { car } = Astro.props;
---

<a
    href={`/fahrzeug/${car.id}`}
    class="group bg-white rounded-2xl overflow-hidden shadow-lg border border-gray-100 transition-all duration-300 hover:shadow-2xl hover:-translate-y-1"
>
    <div class="relative aspect-[16/10] overflow-hidden">
        <img
            src={car.images[0]}
            alt={`${car.make} ${car.model}`}
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
        />
        <div class="absolute top-4 left-4 flex gap-2">
            <span
                class="px-3 py-1 bg-navy/80 backdrop-blur-md text-white text-[10px] font-black rounded-full uppercase tracking-widest"
            >
                {
                    car.category === "nutz"
                        ? "Nutzfahrzeug"
                        : car.category === "pkw"
                          ? "PKW"
                          : "Quad/UTV"
                }
            </span>
        </div>
        <div class="absolute bottom-4 right-4 animate-pulse">
            <span
                class="px-3 py-1 bg-green-500 text-white text-[10px] font-black rounded-full uppercase"
                >HU/AU Neu</span
            >
        </div>
    </div>

    <div class="p-6">
        <div class="mb-4">
            <h3
                class="text-xl font-black text-navy uppercase tracking-tight group-hover:text-orange transition-colors"
            >
                {car.make}
                <span class="font-normal text-gray-500">{car.model}</span>
            </h3>
        </div>

        <div class="grid grid-cols-2 gap-y-3 gap-x-4 mb-6">
            <div class="flex items-center gap-2 text-gray-500 text-xs">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-orange"
                    ><path
                        d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h2"
                    ></path><circle cx="7" cy="17" r="2"></circle><path
                        d="M9 17h6"></path><circle cx="17" cy="17" r="2"
                    ></circle></svg
                >
                {formatMileage(car.mileage)}
            </div>
            <div class="flex items-center gap-2 text-gray-500 text-xs">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-orange"
                    ><rect width="18" height="18" x="3" y="4" rx="2" ry="2"
                    ></rect><line x1="16" x2="16" y1="2" y2="6"></line><line
                        x1="8"
                        x2="8"
                        y1="2"
                        y2="6"></line><line x1="3" x2="21" y1="10" y2="10"
                    ></line></svg
                >
                {car.firstRegistration}
            </div>
            <div class="flex items-center gap-2 text-gray-500 text-xs">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-orange"
                    ><path d="M12 2v20"></path><path d="m4.93 4.93 14.14 14.14"
                    ></path><path d="M2 12h20"></path><path
                        d="m19.07 4.93-14.14 14.14"></path></svg
                >
                {car.power}
                {car.powerUnit}
            </div>
            <div class="flex items-center gap-2 text-gray-500 text-xs">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="text-orange"
                    ><path d="M3 12h18"></path><path d="M3 7h18"></path><path
                        d="M3 17h18"></path></svg
                >
                {car.transmission}
            </div>
        </div>

        <div
            class="flex items-center justify-between pt-4 border-t border-gray-100"
        >
            <span class="text-2xl font-black text-navy"
                >{formatPrice(car.price)}</span
            >
            <div class="text-orange">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    ><line x1="5" y1="12" x2="19" y2="12"></line><polyline
                        points="12 5 19 12 12 19"></polyline></svg
                >
            </div>
        </div>
    </div>
</a>
